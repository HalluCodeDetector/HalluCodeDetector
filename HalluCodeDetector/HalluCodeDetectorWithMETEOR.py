# Download necessary resources (required for first run)
# import nltk
# nltk.download('punkt')
# nltk.download('wordnet')
# nltk.download('punkt_tab')
import json

import numpy as np
from nltk.translate import meteor_score
from nltk.tokenize import word_tokenize  # 导入分词器

def meteor_similarity(code1, code2):
    hypothesis = word_tokenize(code1)
    reference_texts = [code2]
    references = [word_tokenize(ref) for ref in reference_texts]
    meteor = meteor_score.meteor_score(references, hypothesis)
    return meteor

def Calculate_SimilarityScore(codes):
    scores = []
    for i in range(0, len(codes)):
        score = 0
        for j in range(0, len(codes)):
            if j == i:
                continue
            score += meteor_similarity(codes[i], codes[j])/(len(codes)-1)
        scores.append(score)
    return scores

def build_similarity_matrix(codes):
    n = len(codes)
    sim_matrix = np.zeros((n, n))
    for i in range(n):
        for j in range(n):
            if i <= j:
                sim = meteor_similarity(codes[i], codes[j])
                sim_matrix[i][j] = sim
                sim_matrix[j][i] = sim
    return sim_matrix

def getMETEORScores(filepath, size_per_question):
    # In the following annotated section, humaneval_scores and mbpp_scores are our experimental results.

    # humaneval_scores = [0.9788497845128874, 0.5099873216374857, 0.9286434150379729, 0.9999375, 0.8469752314076531, 0.8078559444740894, 0.9999975654765094, 0.9997106481481479, 0.8505317398196147, 0.8348169919184909, 0.7604245140973436, 0.84523975877537, 0.9022992436514776, 0.9387174971980021, 0.9908355148564802, 0.8641461083204351, 0.5508613280018444, 0.999993711245551, 0.995105021040686, 0.9233078575881615, 0.6946922832720897, 0.8774311444572637, 0.9545991433610479, 0.7239862089892696, 0.6382944219489224, 0.8795405367220723, 0.9647570121353841, 0.9964328787262617, 0.9976851851851853, 0.9997724169321802, 0.7170781893004116, 0.8149724377025862, 0.5587498893322367, 0.8069916634296872, 0.8407521346611949, 0.5741588397447603, 0.9999921874999997, 0.952238551957298, 0.9269909053653429, 0.8695186217575148, 0.7368949843000898, 0.5661315841497091, 0.9995, 0.9770620798504813, 0.8962691640380815, 0.9976851851851853, 0.9078233671451924, 0.7375436521326337, 0.7515218952152068, 0.8906262477710811, 0.9370194909931019, 0.7763828371570352, 0.8460672339216289, 0.6576778631586457, 0.9995, 0.7050924266047407, 0.9246011538491216, 0.931876792074143, 0.9785456734320344, 0.7841492421020974, 0.5324074074074074, 0.9332175715896536, 0.9999883381924198, 0.9999989047889198, 0.6181098010651618, 0.7805157244113032, 0.9999460101500918, 0.6603733780620935, 0.9460334619588235, 0.7830033824307808, 0.4627758037828392, 0.9887871459319661, 0.8429154776592424, 0.8457673949834745, 0.9999832164076398, 0.9333832243454987, 0.7927129887773158, 0.5532981402414359, 0.9999941303531179, 0.9214799733540177, 0.9999974373693058, 0.8064738467640129, 0.9869466369553777, 0.5347361022063114, 0.7228714723864594, 0.8705272648300586, 0.7390098463901938, 0.996089560881819, 0.857453994155264, 0.8836457303737801, 0.8421967158946877, 0.8638958341725491, 0.7031734814551583, 0.6405134742033319, 0.9013745506526082, 0.6399505944718787, 0.8269648555341287, 0.9999375, 0.9663685606707192, 0.4572707335231504, 0.9999892832647462, 0.4582623635122699, 0.7535876663058736, 0.91619791965575, 0.9999948631544338, 0.9036343265136622, 0.9335891284548316, 0.9516930154990563, 0.5906530445203491, 0.6777168534919409, 0.6416744836847225, 0.905850023271481, 0.9631632469946237, 0.8093294502611623, 0.8061720150555508, 0.965470048749269, 0.39626224437875446, 0.9944349079618485, 0.8312274294872702, 0.5987984045686212, 0.8757184100203488, 0.9999915709974883, 0.583180530484941, 0.9333185802018215, 0.7358707678620444, 0.9760272714355552, 0.7149116299471481, 0.604496608105941, 0.9999948631544338, 0.6757820375779512, 0.4116684440180786, 0.9999927453171021, 0.6800473841893389, 0.6602575445363479, 0.6913668184619731, 0.9905546704324183, 0.9304779442958572, 0.6436105765194808, 0.9898560799536744, 0.5206001557965048, 0.936216129645856, 0.7647083810100277, 0.9999948631544338, 0.9879417305059659, 0.4923129629904801, 0.8256192203467267, 0.6350225009622332, 0.6481351614075676, 0.7724234850658254, 0.9426520953364501, 0.9756272833372526, 0.9322902818996455, 0.49241898452993316, 0.8702430909663408, 0.8935126550997627, 0.8234296038853984, 0.4579094480278791, 0.8010445552148787, 0.7487966749036059, 0.9433869404420037, 0.8184082335495322, 0.992766084241549, 0.9436040256405269, 0.6800434436728482]
    # return humaneval_scores

    # mbpp_scores = [0.9652233636550596, 0.7609696012558059, 0.8372049841545152, 0.8467024306794269, 0.9040924108891991, 0.9545159251954124, 0.9999460101500918, 0.9432592592592594, 0.7959146633663067, 0.9727785971159296, 0.9807256013898717, 0.971506875137142, 0.4508322642440924, 0.9530606023845295, 0.7113528682006457, 0.9914236961940308, 0.9995, 0.9999915709974883, 0.9999375, 0.984727470756487, 0.9999679999999999, 0.999979498954447, 0.9999638310185185, 0.8743831462898242, 0.9417353774356939, 0.948063623341591, 0.999979498954447, 0.9825067010620931, 0.8884585609351325, 0.9999957500701242, 0.6309922492865907, 0.8750399567122072, 0.9421044649046946, 0.9999977971724503, 0.8949336981169279, 0.916303907896456, 0.9999954788773144, 0.9036175076022603, 0.8740343655428265, 0.9999901289163522, 0.9999460101500918, 0.892876457869789, 0.9999915709974883, 0.777608294331001, 0.9217028217054263, 0.9633935947902998, 0.7782227271445191, 0.4824690316427741, 0.9389634359541388, 0.8083458938675574, 0.9998779296875001, 0.9997106481481479, 0.9999927453171021, 0.822570600351483, 0.999958905235473, 0.8944181420286696, 0.9385268571727183, 0.8661323851046799, 0.7330429270888368, 0.9089971136395874, 0.9999980926513673, 0.9999860867629462, 0.805044912307319, 0.999898229187869, 0.9999883381924198, 0.9249899855072677, 0.9482937668621507, 0.9999983375614687, 0.8928384170128378, 0.8419758610065002, 0.7778765044696738, 0.8639018036094293, 0.9999460101500918, 0.9912243761961099, 0.9863226678624959, 0.9364324457235189, 0.9587518215189658, 0.9903004822578163, 0.9998779296875001, 0.9649307999061694, 0.9693345700071408, 0.9999460101500918, 0.8845011115139471, 0.9974617285130674, 0.9067095065003741, 0.9999679999999999, 0.9999772230320698, 0.9999892832647462, 0.9999142661179699, 0.9080588878622451, 0.9896867956423743, 0.9523088793416956, 0.914988676161938, 0.9629993954596376, 0.8853260099596255, 0.984038982545765, 0.9999927453171021, 0.9999832164076398, 0.8050988558415326, 0.9191924869273355, 0.9999860867629462, 0.9913124387358407, 0.989301608805122, 0.9998518518518515, 0.9930605977997213, 0.969071712080259, 0.5416072039599472, 0.6578614977471622, 0.9999960000000001, 0.793419806308618, 0.9999932512687615, 0.9192393569411315, 0.8085848558388469, 0.9413301363216238, 0.9998779296875001, 0.7177596802459166, 0.9405305357711227, 0.8769479166666668, 0.9874357744098823, 0.9176979896432993, 0.7133809855939217, 0.7681056417178858, 0.9535040311485389, 0.7344991638367402, 0.9999984098310601, 0.7666293440937486, 0.8784209522262031, 0.927858199492815, 0.7449212152115047, 0.8099841214287543, 0.9036444336083783, 0.9997106481481479, 0.9760051409567541, 0.8171800032848483, 0.8369128460544346, 0.942096364483233, 0.9263515847820608, 0.6510878665509854, 0.9383838695468111, 0.7490591654154002, 0.9999991255484995, 0.9963479905723771, 0.9999745973682873, 0.9644544418687181, 0.9753729503879827, 0.9775367994964426, 0.4120368778487051, 0.8503925112013808, 0.7968235979145284, 0.9999960000000001, 0.9310068994311413, 0.9743875286682071, 0.9036212979136656, 0.9290629769384964, 0.7838282228260618, 0.9729717353497164, 0.9999984779716842, 0.8139903732136154, 0.7380312367249112, 0.9540607148605793, 0.9507772538762711, 0.9999530428249439, 0.8652060962691471, 0.9663883279559811, 0.9999927453171021, 0.9784177620619707, 0.9146207024590383, 0.9817500949830159, 0.9700170915748619, 0.9999932512687615, 0.8623333333333335, 0.9568451107699713, 0.4625955880712037, 0.9999932512687615, 0.8208998619439802, 0.9998779296875001, 0.9688852277101423, 0.8437995163772767, 0.6410217202341885, 0.9480374759993107, 0.8541824564766834, 0.9760677799437611, 0.8631033454547022, 0.9999271030762502, 0.807962563246066, 0.908056441620608, 0.8909054491525531, 0.8449233669494818, 0.4961344718532487, 0.5965795275300295, 0.999979498954447, 0.9999932512687615, 0.9418790104619249, 0.8812602578536571, 0.9938555064544778, 0.9811950855886304, 0.9999745973682873, 0.9904371657685513, 0.9877545225378909, 0.9937815906776385, 0.984272964587861, 0.9999872786484835, 0.9725527052591885, 0.9997724169321802, 0.9998518518518515, 0.9999814814814816, 0.980719526996777, 0.9999715521165226, 0.9364539587448206, 0.9905794583035744, 0.885323236208858, 0.999958905235473, 0.9444600706191363, 0.975152009247051, 0.9541289491942533, 0.9226550630761585, 0.999979498954447, 0.6965181110213513, 0.9239780611212306, 0.9128415662438054, 0.9999530428249439, 0.8894547721142169, 0.962805059906996, 0.9796632532026606, 0.7586251155400698, 0.9997106481481479, 0.9999271030762502, 0.9931378723438848, 0.9999962307106618, 0.9998779296875001, 0.8119530328422403, 0.9494949576174849, 0.9880661408535867, 0.9875385085195686, 0.7233221792378175, 0.6237999115165594, 0.8387301831013729, 0.9999530428249439, 0.8354546364925048, 0.7888464369602473, 0.9999927453171021, 0.9996243425995491, 0.7630005945163494, 0.8705047787425537, 0.8998227908426328, 0.8580702319107898, 0.9663485371325623, 0.9820339938810415, 0.8997446706662745, 0.9997724169321802, 0.9999745973682873, 0.8439783321934005, 0.9999883381924198, 0.9999976851851848, 0.981963216142688, 0.939658523466464, 0.9825540872086539, 0.9999679999999999, 0.9528881736408612, 0.921241369174873, 0.9823288487556912, 0.8222867171277259, 0.9999271030762502, 0.9858592687074827, 0.9481354810819788, 0.940189665395537, 0.8549651618578475, 0.8700597735616881, 0.8271719774808063, 0.999993711245551, 0.9904125282346948, 0.999898229187869, 0.9999715521165226, 0.9409229201684739, 0.8652853774814516, 0.9999271030762502, 0.9999745973682873, 0.9919639981943748, 0.9936817639019242, 0.9999883381924198, 0.9999271030762502, 0.981563896195515, 0.9806018941355072, 0.990969245116572, 0.9812621171220477, 0.8719710516556435, 0.6767264700780786, 0.9591219779226374, 0.9999901289163522, 0.799621556335127, 0.9908714097019713, 0.962498472274066, 0.8768712179489012, 0.7705766182500082, 0.9076681139703588, 0.9999951841114204, 0.952578964100241, 0.9875738980905308, 0.9704160350435602, 0.9699586064966914, 0.9908195730452674, 0.9999814814814816, 0.7834334578951955, 0.8494850755270733, 0.9575268810129618, 0.8061791113381329, 0.9843190303261492, 0.9236293968454228, 0.9998779296875001, 0.9996243425995491, 0.9267512225344876, 0.8713859682121528, 0.9999142661179699, 0.6815237797766139, 0.9621119358643111, 0.9884355783232349, 0.9999993364925136, 0.949370111021077, 0.9659305555555556, 0.8136454914025183, 0.8192073554010397, 0.9999892832647462, 0.9006595413624686, 0.918549763287194, 0.9809488040479691, 0.7933265042241793, 0.858332758004561, 0.7793852487289354, 0.9999638310185185, 0.9886018518518519, 0.973355895271689, 0.9777561409880494, 0.9999271030762502, 0.9472717259967094, 0.7175890069860285, 0.9666241496598638, 0.9312756174201047, 0.9999957500701242, 0.744842339718571, 0.9690763034362486, 0.9574895595303757, 0.8100236303763099, 0.9999915709974883, 0.8999375538898232, 0.9999921874999997, 0.9121858138388433, 0.8512609577104541, 0.8760906362418406, 0.5107276809236644, 0.8050665452528729, 0.9122493736223566, 0.9999271030762502, 0.825706748786747, 0.9886018518518519, 0.7996788759684753, 0.7942249757045674, 0.7637329351305334, 0.9873516951782383, 0.9443221697279589, 0.9726683565694972, 0.965387759515571, 0.972393669717319, 0.9999679999999999, 0.9999994348596641, 0.8711923611546499, 0.9178238752660047, 0.9742469172336479, 0.8328391235588204, 0.9659305555555556, 0.9999638310185185, 0.995815948011036, 0.9999772230320698, 0.9998779296875001, 0.9117046353852161, 0.9330115386045489, 0.7038250168537611, 0.9844617819660553, 0.9555445707981967, 0.997322738077176, 0.9848262960527919, 0.9999460101500918, 0.6157879314989833, 0.8706419676946706, 0.999979498954447, 0.9999915709974883, 0.9506551606886713, 0.9652382010537249, 0.9999814814814816, 0.9999960000000001, 0.8520506002120758, 0.992455899583811, 0.9907902455845912, 0.5830724665698176, 0.9999271030762502, 0.78620358394844, 0.9838352931275651, 0.9354084145393249, 0.9939521253786097, 0.9887736544919252, 0.9670991893053718, 0.7999229648365115, 0.9913697967805711, 0.9601814967088311, 0.9998779296875001, 0.9997106481481479, 0.9999679999999999, 0.8039785678758644, 0.8996272464854815, 0.972697050254572, 0.9999901289163522, 0.9271536738828948, 0.9695, 0.9999271030762502, 0.978781991427385, 0.9361764255419133, 0.8903500514380507, 0.6917515348188034, 0.9999921874999997, 0.9174170744350976, 0.931179905371783, 0.7780833845540904, 0.7600975170156913, 0.9436008779193346, 0.9740395283340919, 0.9999715521165226, 0.9383555597295268, 0.9985172839893914, 0.9999990591617883, 0.9999715521165226, 0.9963849219521513, 0.660018142021273, 0.8402358908720284, 0.837913454982953, 0.9895193251394314, 0.9997724169321802, 0.8605124715317771, 0.509154205085819, 0.9999975654765094, 0.8334108387240894, 0.827687595844433, 0.9999460101500918, 0.9644319450463136, 0.9999814814814816, 0.7552567232716982, 0.9999921874999997, 0.9999715521165226, 0.9999375, 0.9445267751345416, 0.903298879376011, 0.999958905235473, 0.9999142661179699, 0.9812737705311402, 0.9939830914828309, 0.9998035257932468, 0.9756182806510976, 0.9481321028139765, 0.9168843395033777, 0.8959351419288961, 0.9999530428249439, 0.9999638310185185, 0.9999638310185185, 0.9753497072162618, 0.8225584224867919, 0.9999745973682873, 0.9925123561770388, 0.6270967472046366, 0.8624981710105167, 0.7404275010168606, 0.9778846513316718, 0.7062131196728416, 0.9208658332814292, 0.9288780699313696, 0.6187113890470205, 0.999898229187869, 0.999958905235473, 0.9999530428249439, 0.9995, 0.9324799432937105, 0.9999847412109374, 0.713625335992995, 0.9999983375614687, 0.9161746294636306, 0.9999908878845313, 0.9999460101500918, 0.8830862546663811, 0.9994804230438334, 0.9999271030762502, 0.8939834085499203, 0.9481977491047258, 0.9669915704900127, 0.9998653431825177, 0.8087599768855616, 0.8690748994398583, 0.9238633009677781, 0.9861273203925333, 0.9027106768956334, 0.8325214490874115, 0.9634199170410567, 0.9995, 0.9998518518518515, 0.9784479595624808, 0.8822112415517481, 0.9697146643335821, 0.9903844282794623, 0.9201896362263823, 0.9999932512687615, 0.9999460101500918, 0.9520886283391866, 0.99999451303155, 0.8015432743508373, 0.8764668145362863, 0.8733645265843846, 0.8469212892814905, 0.9122492139021063, 0.9330254233212821, 0.9325840384446017, 0.9999860867629462, 0.8170902060040689, 0.9633221752079282, 0.9770179813927636, 0.9231110071479142, 0.9917996797694129, 0.9497444184038653, 0.9738082676767741, 0.6925454368301269, 0.9161844594018769, 0.8122877858573643, 0.9480541668947369, 0.9848210759307542, 0.9383337260029174, 0.9999995424291703, 0.9348471376317492, 0.9999638310185185, 0.9858207443133502, 0.999898229187869, 0.999958905235473, 0.9999872786484835, 0.9996243425995491, 0.9999772230320698, 0.9907276561876558, 0.9769422040431772, 0.9999679999999999, 0.9999941303531179, 0.9999679999999999, 0.7441238875453711, 0.6739217972229207, 0.9846742998734856, 0.9938620792666404, 0.9572284204022232, 0.9903942280422399, 0.9999271030762502, 0.982206112916272, 0.9999988148148147, 0.9436548701021629, 0.9999901289163522, 0.9091777247451116, 0.8510889101818716, 0.9557570561134827, 0.9993348380710063, 0.960130640295232, 0.9608563648190168, 0.9999638310185185, 0.8806313887643169, 0.9999954788773144, 0.9996243425995491, 0.9999715521165226, 0.9966273713274779, 0.9999142661179699, 0.999898229187869, 0.7710473932022663, 0.9288355966185159, 0.9583055245159053, 0.9059799672071167, 0.9813961390291266, 0.9385645598347769, 0.8926906664182612, 0.7589163837080948, 0.987699219163549, 0.9999872786484835, 0.9393637343371625, 0.8225087428043822, 0.9794373018528253, 0.9999991858335031, 0.8609248087331717, 0.7092117596407469, 0.9239585117479534, 0.9996243425995491, 0.9999715521165226, 0.866211968691502, 0.6392112297615015, 0.9691227655494052, 0.6377645000209684, 0.9999892832647462, 0.9622687024917469, 0.7014641238348953, 0.9997724169321802, 0.9590979931723944, 0.9789797409764247, 0.9999921874999997, 0.9998177842565596, 0.8315915342511326, 0.999979498954447, 0.9122468464939031, 0.9999638310185185, 0.9587819316035322, 0.9337659868046072, 0.9712679090917313, 0.9020135456040048, 0.6614062306883035, 0.9943861371885174, 0.5825843694438886, 0.9999957500701242, 0.5718393376770325, 0.9999530428249439, 0.9897669069018931, 0.5682992181826911, 0.8287278025896091, 0.891421807004283, 0.9259563165506881, 0.893235911636018, 0.99999451303155, 0.9646131012204537, 0.9052513522713779, 0.9995, 0.9999892832647462, 0.9912451585409463, 0.9704802031005241, 0.999898229187869, 0.9361575570342205, 0.8316320433980635, 0.911790920737151, 0.9467023311738096, 0.9999941303531179, 0.9685726158211639, 0.8605548126626729, 0.6715173930068711, 0.6894122942386831, 0.9318511935278911, 0.879421487603306, 0.7451908719987453, 0.9999142661179699, 0.8592443540168282, 0.9813953448861706, 0.9999951841114204, 0.9999860867629462, 0.909131499664044, 0.9986132926625445, 0.9999941303531179, 0.9532800353803755, 0.9999814814814816, 0.9999271030762502, 0.9999968246710358, 0.9999892832647462, 0.9998779296875001, 0.9917846189513736, 0.9133315821531012, 0.99999451303155, 0.9386145814963, 0.9204339581771084, 0.6142593901051966, 0.9982939086571267, 0.999958905235473, 0.3738460763688121, 0.9385469872793158, 0.9409689450528199, 0.9997724169321802, 0.9999715521165226, 0.9395200627994077, 0.9999992907489548, 0.9947324420020724, 0.8617605066693049, 0.9999271030762502, 0.999979498954447, 0.9799178288152504, 0.9848262960527919, 0.9691543012772352, 0.7068935622593366, 0.9998518518518515, 0.9999892832647462, 0.9645376974870852, 0.611267348395481, 0.9999679999999999, 0.8721129769029634, 0.37387525764551344, 0.8186708520120225, 0.9150665419097842, 0.9893155862426977, 0.8588705231086524, 0.999999484694924, 0.9439308924168133, 0.9648016476267294, 0.8771379890002398, 0.9891721353615437, 0.7660823252594019, 0.9999941303531179, 0.8643373260290272, 0.9999638310185185, 0.9849520622570307, 0.6636617300273098, 0.971656747415763, 0.7701857917438035, 0.9070073663392716, 0.9997106481481479, 0.9928059647415067, 0.999958905235473, 0.5552880502144459, 0.4974471862811326, 0.9995, 0.8845877861903347, 0.9999679999999999, 0.8662904438330115, 0.9999883381924198, 0.9996243425995491, 0.8144423212825824, 0.9886601422259307, 0.9995, 0.9457962621587801, 0.9997106481481479, 0.9999847412109374, 0.6988980716253445, 0.8764997670657807, 0.8066071727371531, 0.9999832164076398, 0.962007692107946, 0.9785900664174886, 0.9825611714784186, 0.9999530428249439, 0.9421077114913303, 0.9999679999999999, 0.884956404863644, 0.9102148063601408, 0.5332659751811409, 0.9941334081170525, 0.9772079737659585, 0.4101296569671061, 0.9150135748384411, 0.9999772230320698, 0.8814859865370229, 0.8167769137393696, 0.7465116719418509, 0.9886297214041573, 0.8633728649242651, 0.7246363087246659, 0.8623333333333335, 0.7278945970413134, 0.9780439160130079, 0.9873709433578697, 0.9287563272680737, 0.9999375, 0.8613412228796846, 0.8248366952681268, 0.9229844596041173, 0.9999921874999997, 0.9966259020672003, 0.988154438074406, 0.9999832164076398, 0.9131302095481275, 0.9999932512687615, 0.7999349624302834, 0.9959827845232662, 0.9110449429665588, 0.9999460101500918, 0.967306409738184, 0.9999638310185185, 0.7412718075304414, 0.9999832164076398, 0.9999962307106618, 0.8505571066694111, 0.7022495180116384, 0.8057693361400016, 0.9781155903867532, 0.9999892832647462, 0.9041512679980919, 0.9644198529159729, 0.979770778048696, 0.9368919785344999, 0.7866541538579778, 0.9485289603206506, 0.9569043963484866, 0.8742907216507899, 0.7227544389951137, 0.944588046896345, 0.8046097844633273, 0.9969506413242892, 0.4346238676514379, 0.9828351174623101, 0.9996482223841918, 0.9580721689615322, 0.9999638310185185, 0.9999908878845313, 0.7154761134504529, 0.7305510546923436, 0.9282201250788322, 0.9999872786484835, 0.8982028309742679, 0.9997724169321802, 0.9999892832647462, 0.9996243425995491, 0.8240488241283165, 0.9844617819660553, 0.9998653431825177, 0.8753738819276663, 0.9874031171851626, 0.7065861789199912, 0.7373189925298983, 0.9999921874999997, 0.999958905235473, 0.9054269547325102, 0.9999941303531179, 0.5258591934799111, 0.9997106481481479, 0.9771185633215167, 0.9996243425995491, 0.9998779296875001, 0.9999971528790086, 0.9993141289437587, 0.9481792034800179, 0.9999638310185185, 0.9793714232575053, 0.955690524880709, 0.9999142661179699, 0.5486731937876519, 0.9999941303531179, 0.9999460101500918, 0.9999715521165226, 0.9999353908759392, 0.8509301906678736, 0.9656040706320084, 0.9773370698905288, 0.9564872916550983, 0.7460719263813463, 0.9626704071837033, 0.9096608071863587, 0.9886654507093751, 0.9999832164076398, 0.8069950820268594, 0.7578634485875732, 0.5610318033898534, 0.9999271030762502, 0.9633327306316374, 0.9999951841114204, 0.9999460101500918, 0.7110421890342138, 0.9771497828637223, 0.9862529573762876, 0.9995054486336358, 0.8153714471195842, 0.9999375, 0.8029229831093447, 0.9100315006626213, 0.8954658546315027, 0.9999271030762502, 0.9608261440473997, 0.9998177842565596, 0.9999271030762502, 0.9772911957098228, 0.9998779296875001, 0.9999814814814816, 0.9830335094577325, 0.9925123561770388, 0.8580699364509641, 0.9752330721946822, 0.9999981793354574, 0.999958905235473, 0.999958905235473, 0.9619911931806376, 0.991658078319136, 0.9220174665062173, 0.8900796198135974, 0.9879661220165021, 0.9466217529446914, 0.999958905235473, 0.9999860867629462, 0.7766081863339411, 0.9627399051158563, 0.9363216380568382, 0.9998518518518515, 0.39160567725341244, 0.9912408394497477, 0.999672755399536, 0.9999990234374998, 0.8398030054900248, 0.7754438937729222, 0.9815891170801503, 0.9433661352471059, 0.9999530428249439, 0.8820178028892391, 0.921282771776406, 0.9999142661179699, 0.9801676157193475, 0.9999814814814816, 0.9510352522287455, 0.9999271030762502, 0.8444340079644728, 0.6098237892076714, 0.9999271030762502, 0.9630135986530339, 0.6215074638941979, 0.8720054611554618, 0.7124196760814513, 0.9977971587168594, 0.7784785197567062, 0.8618403057221612, 0.7955942429195964, 0.999898229187869, 0.999993711245551, 0.8398094779164441, 0.9999772230320698, 0.9085208448052486, 0.9323537314620597, 0.6839964414777651, 0.755203764595519, 0.9573014101473923, 0.9673947165276404, 0.9740731066084153, 0.9564839401314262, 0.9999921874999997, 0.9681000570883518, 0.9434768804417983, 0.9999715521165226, 0.9831973973551253, 0.8347489141263733, 0.9999998457643181, 0.9998779296875001, 0.9205879629629631, 0.5829701676600834, 0.9999974373693058, 0.7773325826543175, 0.9637277730338516, 0.9803856229652029, 0.999979498954447, 0.9999892832647462, 0.7094603952848542, 0.9813885472929524, 0.9734571412025105, 0.5138025011922189, 0.7020394475216987, 0.848073755568143, 0.8628592850283384, 0.883365725764758, 0.9518978740059, 0.8763467661664678, 0.9999375, 0.6471134819241947, 0.9996243425995491, 0.9999883381924198, 0.8719765684051398, 0.8219985514838702, 0.9376044639450909, 0.8903330092180386, 0.8048204518451303, 0.9134577769540737, 0.9921441864353177, 0.9999460101500918, 0.9889925712510794, 0.999958905235473, 0.9999915709974883, 0.9999997775890745, 0.9999530428249439, 0.9696842447609209, 0.9974426603020339, 0.9999883381924198, 0.9886774410896437, 0.9998518518518515, 0.9191047218661802, 0.9999375, 0.9545687152669821, 0.8314819950649713, 0.6401958079328899, 0.9998779296875001, 0.978921118413236, 0.9997106481481479, 0.8886582938478359, 0.9013888693238]
    # return mbpp_scores

    with open(filepath, 'r', encoding='utf-8') as file:
        data = json.load(file)

    y_score = []

    for question_id in range(0, int(len(data)/size_per_question)):
        codes = []
        for generation_index in range(0, size_per_question):
            codes.append(data[str(question_id * size_per_question + generation_index)]["generation_code"])

        score = 0
        for i in range(0, len(codes)):
            if i == 0:
                continue
            score += meteor_similarity(codes[0], codes[i]) / (len(codes) - 1)

        if score >= 1:
            y_score.append(1)
        else:
            y_score.append(score)

        print(f"question_id: {question_id}")
        print(f"Score: {str(score)}")

    return y_score